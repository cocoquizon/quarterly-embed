<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Magazine Viewer</title>
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      background: #f7f5f2;
      font-family: Georgia, serif;
    }

    #viewer {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 16px;
    }

    #page-wrap {
      position: relative;
      box-shadow: 0 6px 32px rgba(0,0,0,0.13);
      flex-shrink: 0;
      overflow: hidden;
    }

    #page-wrap img {
      display: block;
      width: 100%;
      height: auto;
      position: absolute;
      top: 0; left: 0;
      transition: opacity 0.3s ease;
      opacity: 0;
    }

    #page-wrap img.active { opacity: 1; }

    .arrow {
      background: none;
      border: none;
      cursor: pointer;
      color: #bbb;
      font-size: 22px;
      padding: 8px;
      flex-shrink: 0;
      transition: color 0.15s;
      align-self: center;
    }
    .arrow:hover { color: #333; }
    .arrow:disabled { opacity: 0.2; cursor: default; }

    #bar {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 14px;
      padding: 0 16px 16px;
    }

    #page-num {
      font-size: 11px;
      letter-spacing: 0.1em;
      color: #aaa;
      min-width: 48px;
      text-align: center;
    }

    #dots {
      display: flex;
      gap: 5px;
      flex-wrap: wrap;
      justify-content: center;
      max-width: 240px;
    }

    .dot {
      width: 5px; height: 5px;
      border-radius: 50%;
      background: #ccc;
      cursor: pointer;
      transition: background 0.2s, transform 0.15s;
      flex-shrink: 0;
    }
    .dot.on { background: #444; transform: scale(1.5); }
  </style>
</head>
<body>

<div id="viewer">
  <button class="arrow" id="prev">&#8592;</button>
  <div id="page-wrap"></div>
  <button class="arrow" id="next">&#8594;</button>
</div>
<div id="bar">
  <div id="dots"></div>
  <span id="page-num"></span>
</div>

<script>
  // ─────────────────────────
  //  CONFIGURATION
  // ─────────────────────────
  var PAGES = [
    'q2-images/web-fbcq2.jpg',
    'q2-images/web-fbcq2-2.jpg',
    'q2-images/web-fbcq2-3.jpg',
    'q2-images/web-fbcq2-4.jpg',
    'q2-images/web-fbcq2-5.jpg',
    'q2-images/web-fbcq2-6.jpg',
    'q2-images/web-fbcq2-7.jpg',
    'q2-images/web-fbcq2-8.jpg',
    'q2-images/web-fbcq2-9.jpg',
    'q2-images/web-fbcq2-10.jpg',
    'q2-images/web-fbcq2-11.jpg',
    'q2-images/web-fbcq2-12.jpg',
    'q2-images/web-fbcq2-13.jpg',
    'q2-images/web-fbcq2-14.jpg',
    'q2-images/web-fbcq2-15.jpg',
    'q2-images/web-fbcq2-16.jpg',
  ];
  var PAGE_RATIO = 0.773; // width / height
  // ─────────────────────────

  var current = 0;
  var imgs    = [];
  var wrap    = document.getElementById('page-wrap');

  // Size based on available width — works reliably inside iframes
  var ARROW_W = 56;
  var PAD     = 32;
  var pW      = Math.min(window.innerWidth - ARROW_W * 2 - PAD, 680);
  var pH      = Math.round(pW / PAGE_RATIO);

  wrap.style.width  = pW + 'px';
  wrap.style.height = pH + 'px';

  // Build images
  PAGES.forEach(function (src, i) {
    var img = document.createElement('img');
    img.src = src;
    img.alt = 'Page ' + (i + 1);
    img.width = pW;
    img.height = pH;
    if (i === 0) img.classList.add('active');
    wrap.appendChild(img);
    imgs.push(img);
  });

  // Build dots
  var dotsEl = document.getElementById('dots');
  PAGES.forEach(function (_, i) {
    var d = document.createElement('div');
    d.className = 'dot' + (i === 0 ? ' on' : '');
    d.addEventListener('click', function () { goTo(i); });
    dotsEl.appendChild(d);
  });

  function goTo(n) {
    imgs[current].classList.remove('active');
    document.querySelectorAll('.dot')[current].classList.remove('on');
    current = n;
    imgs[current].classList.add('active');
    document.querySelectorAll('.dot')[current].classList.add('on');
    document.getElementById('page-num').textContent = (current + 1) + ' / ' + PAGES.length;
    document.getElementById('prev').disabled = current === 0;
    document.getElementById('next').disabled = current === PAGES.length - 1;
  }

  goTo(0);

  document.getElementById('prev').addEventListener('click', function () {
    if (current > 0) goTo(current - 1);
  });
  document.getElementById('next').addEventListener('click', function () {
    if (current < PAGES.length - 1) goTo(current + 1);
  });

  // Swipe
  var startX = null;
  wrap.addEventListener('touchstart', function (e) { startX = e.touches[0].clientX; }, { passive: true });
  wrap.addEventListener('touchend', function (e) {
    if (startX === null) return;
    var diff = startX - e.changedTouches[0].clientX;
    if (Math.abs(diff) > 40) {
      diff > 0
        ? goTo(Math.min(current + 1, PAGES.length - 1))
        : goTo(Math.max(current - 1, 0));
    }
    startX = null;
  });

  // Keyboard
  document.addEventListener('keydown', function (e) {
    if (e.key === 'ArrowLeft')  goTo(Math.max(current - 1, 0));
    if (e.key === 'ArrowRight') goTo(Math.min(current + 1, PAGES.length - 1));
  });
</script>

</body>
</html>

</body>
</html>
